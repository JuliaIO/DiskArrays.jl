<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>DiskArrays · DiskArrays.jl</title><meta name="title" content="DiskArrays · DiskArrays.jl"/><meta property="og:title" content="DiskArrays · DiskArrays.jl"/><meta property="twitter:title" content="DiskArrays · DiskArrays.jl"/><meta name="description" content="Documentation for DiskArrays.jl."/><meta property="og:description" content="Documentation for DiskArrays.jl."/><meta property="twitter:description" content="Documentation for DiskArrays.jl."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>DiskArrays.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>DiskArrays</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>DiskArrays</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>DiskArrays</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/meggart/DiskArrays.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/meggart/DiskArrays.jl/blob/main/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="DiskArrays"><a class="docs-heading-anchor" href="#DiskArrays">DiskArrays</a><a id="DiskArrays-1"></a><a class="docs-heading-anchor-permalink" href="#DiskArrays" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.DiskArrays" href="#DiskArrays.DiskArrays"><code>DiskArrays.DiskArrays</code></a> — <span class="docstring-category">Module</span></header><section><div><p><strong>DiskArrays.jl</strong></p><p><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="Lifecycle"/> <a href="https://meggart.github.io/DiskArrays.jl/stable"><img src="https://img.shields.io/badge/docs-stable-blue.svg" alt="Stable Docs"/></a> <a href="https://meggart.github.io/DiskArrays.jl/dev"><img src="https://img.shields.io/badge/docs-dev-blue.svg" alt="Dev Docs"/></a> <a href="https://github.com/meggart/DiskArrays.jl/actions/workflows/ci.yml"><img src="https://github.com/meggart/DiskArrays.jl/actions/workflows/ci.yml/badge.svg" alt="CI"/></a> <a href="https://codecov.io/gh/meggart/DiskArrays.jl/tree/main"><img src="https://codecov.io/gh/meggart/DiskArrays.jl/branch/main/graph/badge.svg" alt="Codecov"/></a></p><p>This package provides a collection of utilities for working with n-dimensional array-like data structures that do have considerable overhead for single read operations.  Most important examples are arrays that represent data on hard disk that are accessed through a C library or that are compressed in chunks.  It can be inadvisable to make these arrays a direct subtype of <code>AbstractArray</code> many functions working with AbstractArrays assume fast random access into single values (including basic things like <code>getindex</code>, <code>show</code>, <code>reduce</code>, etc...). </p><p>Currently supported features are:</p><ul><li><code>getindex</code>/<code>setindex</code> with the same rules as base (trailing or singleton dimensions etc)</li><li>views into <code>DiskArrays</code></li><li>a fallback <code>Base.show</code> method that does not call getindex repeatedly</li><li>implementations for <code>mapreduce</code> and <code>mapreducedim</code>, that respect the chunking of the underlying</li></ul><p>dataset. This greatly increases performance of higher-level reductions like <code>sum(a,dims=d)</code></p><ul><li>an iterator over the values of a DiskArray that caches a chunk of data and returns the values</li></ul><p>within. This allows efficient usage of e.g. <code>using DataStructures; counter(a)</code></p><ul><li>customization of <code>broadcast</code> when there is a <code>DiskArray</code> on the LHS. This at least makes things</li></ul><p>like <code>a.=5</code> possible and relatively fast</p><p><strong>AbstractDiskArray Interface definition</strong></p><p>Package authors who want to use this library to make their disk-based array an <code>AbstractDiskArray</code> should at least implement methods for the following functions:</p><pre><code class="language-julia hljs">Base.size(A::CustomDiskArray)
readblock!(A::CustomDiskArray{T,N},aout,r::Vargarg{AbstractUnitRange,N})
writeblock!(A::CustomDiskArray{T,N},ain,r::Vargarg{AbstractUnitRange,N})</code></pre><p>Here <code>readblock!</code> will read a subset of array <code>A</code> in a hyper-rectangle defined by the unit ranges <code>r</code>. The results shall be written into <code>aout</code>. <code>writeblock!</code> should write the data given by <code>ain</code> into the (hyper-)rectangle of A defined by <code>r</code> When defining the functions it can be safely assumed that <code>length(r) == ndims(A)</code> as well as <code>size(ain) == length.(r)</code>. However, bounds checking is <em>not</em> performed by the DiskArray machinery and currently should be done by the implementation. </p><p>If the data on disk has rectangular chunks as underlying storage units, you should addtionally implement the following methods to optimize some operations like broadcast, reductions and sparse indexing:</p><pre><code class="language-julia hljs">DiskArrays.haschunks(A::CustomDiskArray) = DiskArrays.Chunked()
DiskArrays.eachchunk(A::CustomDiskArray) = DiskArrays.GridChunks(A, chunksize)</code></pre><p>where <code>chunksize</code> is a int-tuple of chunk lengths. If the array does not have an internal chunking structure, one should define</p><pre><code class="language-julia hljs">DiskArrays.haschunks(A::CustomDiskArray) = DiskArrays.Unchunked()</code></pre><p>Implementing only these methods makes all kinds of strange indexing patterns work (Colons, StepRanges, Integer vectors, Boolean masks, CartesianIndices, Arrays of CartesianIndex, and mixtures of all these) while making sure that as few <code>readblock!</code> or <code>writeblock!</code> calls as possible are performed by reading a rectangular bounding box of the required array values and re-arranging the resulting values into the output array. </p><p>In addition, DiskArrays.jl provides a few optimizations for sparse indexing patterns to avoid reading and discarding  too much unnecessary data from disk, for example for indices like <code>A[:,:,[1,1500]]</code>. </p><p><strong>Example</strong></p><p>Here we define a new array type that wraps a normal AbstractArray. The only access method that we define is a <code>readblock!</code> function where indices are strictly given as unit ranges along every dimension of the array. This is a very common API used in libraries like HDF5, NetCDF and Zarr. We also define a chunking, which will control the way iteration and reductions are computed. In order to understand how exactly data is accessed, we added the additional print statements in the <code>readblock!</code> and <code>writeblock!</code> functions.</p><pre><code class="language-julia hljs">using DiskArrays

struct PseudoDiskArray{T,N,A&lt;:AbstractArray{T,N}} &lt;: AbstractDiskArray{T,N}
  parent::A
  chunksize::NTuple{N,Int}
end
PseudoDiskArray(a;chunksize=size(a)) = PseudoDiskArray(a,chunksize)
haschunks(a::PseudoDiskArray) = Chunked()
eachchunk(a::PseudoDiskArray) = GridChunks(a,a.chunksize)
Base.size(a::PseudoDiskArray) = size(a.parent)
function DiskArrays.readblock!(a::PseudoDiskArray,aout,i::AbstractUnitRange...)
  ndims(a) == length(i) || error(&quot;Number of indices is not correct&quot;)
  all(r-&gt;isa(r,AbstractUnitRange),i) || error(&quot;Not all indices are unit ranges&quot;)
  println(&quot;Reading at index &quot;, join(string.(i),&quot; &quot;))
  aout .= a.parent[i...]
end
function DiskArrays.writeblock!(a::PseudoDiskArray,v,i::AbstractUnitRange...)
  ndims(a) == length(i) || error(&quot;Number of indices is not correct&quot;)
  all(r-&gt;isa(r,AbstractUnitRange),i) || error(&quot;Not all indices are unit ranges&quot;)
  println(&quot;Writing to indices &quot;, join(string.(i),&quot; &quot;))
  view(a.parent,i...) .= v
end
a = PseudoDiskArray(rand(4,5,1))</code></pre><pre><code class="nohighlight hljs">Disk Array with size 10 x 9 x 1</code></pre><p>Now all the Base indexing behaviors work for our array, while minimizing the number of reads that have to be done:</p><pre><code class="language-julia hljs">a[:,3]</code></pre><pre><code class="nohighlight hljs">Reading at index Base.OneTo(10) 3:3 1:1

10-element Array{Float64,1}:
 0.8821177068878834
 0.6220977650963209
 0.22676949571723437
 0.3177934541451004
 0.08014908894614026
 0.9989838001681182
 0.5865160181790519
 0.27931778627456216
 0.449108677620097  
 0.22886146620923808</code></pre><p>As can be seen from the read message, only a single call to <code>readblock</code> is performed, which will map to a single call into the underlying C library.</p><pre><code class="language-julia hljs">mask = falses(4,5,1)
mask[3,2:4,1] .= true
a[mask]</code></pre><pre><code class="nohighlight hljs">3-element Array{Int64,1}:
 6
 7
 8</code></pre><p>One can check in a similar way, that reductions respect the chunks defined by the data type:</p><pre><code class="language-julia hljs">sum(a,dims=(1,3))</code></pre><pre><code class="nohighlight hljs">Reading at index 1:5 1:3 1:1
Reading at index 6:10 1:3 1:1
Reading at index 1:5 4:6 1:1
Reading at index 6:10 4:6 1:1
Reading at index 1:5 7:9 1:1
Reading at index 6:10 7:9 1:1

1×9×1 Array{Float64,3}:
[:, :, 1] =
 6.33221  4.91877  3.98709  4.18658  …  6.01844  5.03799  3.91565  6.06882
 ````

When a DiskArray is on the LHS of a broadcasting expression, the results with be
written chunk by chunk:
</code></pre><p>julia va = view(a,5:10,5:8,1) va .= 2.0 a[:,:,1]</p><pre><code class="nohighlight hljs"></code></pre><p>Writing to indices 5:5 5:6 1:1 Writing to indices 6:10 5:6 1:1 Writing to indices 5:5 7:8 1:1 Writing to indices 6:10 7:8 1:1 Reading at index Base.OneTo(10) Base.OneTo(9) 1:1</p><p>10×9 Array{Float64,2}:  0.929979   0.664717  0.617594  0.720272   …  0.564644  0.430036  0.791838  0.392748   0.508902  0.941583  0.854843      0.682924  0.323496  0.389914  0.761131   0.937071  0.805167  0.951293      0.630261  0.290144  0.534721  0.332388   0.914568  0.497409  0.471007      0.470808  0.726594  0.97107  0.251657   0.24236   0.866905  0.669599      2.0       2.0       0.427387  0.388476   0.121011  0.738621  0.304039   …  2.0       2.0       0.687802  0.991391   0.621701  0.210167  0.129159      2.0       2.0       0.733581  0.371857   0.549601  0.289447  0.509249      2.0       2.0       0.920333  0.76309    0.648815  0.632453  0.623295      2.0       2.0       0.387723  0.0882056  0.842403  0.147516  0.0562536     2.0       2.0       0.107673 ````</p><p><strong>Accessing strided Arrays</strong></p><p>There are situations where one wants to read every other value along a certain axis or provide arbitrary strides. Some DiskArray backends may want to provide optimized methods to read these strided arrays.  In this case a backend can define <code>readblock!(a,aout,r::OrdinalRange...)</code> and the respective <code>writeblock</code> method which will overwrite the fallback behavior that would read the whol block of data and only return the desired range.</p><p><strong>Arrays that do not implement eachchunk</strong></p><p>There are arrays that live on disk but which are not split into rectangular chunks, so that the <code>haschunks</code> trait returns <code>Unchunked()</code>. In order to still enable broadcasting and reductions for these arrays, a chunk size will be estimated in a way that a certain memory limit per chunk is not exceeded. This memory limit defaults to 100MB and can be modified by changing <code>DiskArrays.default_chunk_size[]</code>. Then a chunk size is computed based on the element size of the array. However, there are cases where the size of the element type is undefined, e.g. for Strings or variable-length vectors. In these cases one can overload the <code>DiskArrays.element_size</code> function for certain container types which returns an approximate element size (in bytes). Otherwise the size of an element will simply be assumed to equal the value stored in <code>DiskArrays.fallback_element_size</code> which defaults to 100 bytes. </p><p>[ci-img]: https://github.com/meggart/DiskArrays.jl/workflows/CI/badge.svg [ci-url]: https://github.com/meggart/DiskArrays.jl/actions?query=workflow%3ACI [codecov-img]: http://codecov.io/github/meggart/DiskArrays.jl/coverage.svg?branch=main [codecov-url]: (http://codecov.io/github/meggart/DiskArrays.jl?branch=main)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/DiskArrays.jl#L6-L212">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.default_chunk_size" href="#DiskArrays.default_chunk_size"><code>DiskArrays.default_chunk_size</code></a> — <span class="docstring-category">Constant</span></header><section><div><p>The target chunk size for processing for unchunked arrays in MB, defaults to 100MB</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/chunks.jl#L241">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.fallback_element_size" href="#DiskArrays.fallback_element_size"><code>DiskArrays.fallback_element_size</code></a> — <span class="docstring-category">Constant</span></header><section><div><p>A fallback element size for arrays to determine a where elements have unknown size like strings. Defaults to 100MB</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/chunks.jl#L244-L247">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.AbstractDiskArray" href="#DiskArrays.AbstractDiskArray"><code>DiskArrays.AbstractDiskArray</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbstractDiskArray &lt;: AbstractArray</code></pre><p>Abstract DiskArray type that can be inherited by Array-like data structures that have a significant random access overhead and whose access pattern follows n-dimensional (hyper)-rectangles.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/diskarray.jl#L1-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.CachedDiskArray" href="#DiskArrays.CachedDiskArray"><code>DiskArrays.CachedDiskArray</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">CachedDiskArray &lt;: AbstractDiskArray

CachedDiskArray(A::AbstractArray; maxsize=1000)</code></pre><p>Wrap some disk array <code>A</code> with a caching mechanism that will  keep chunks up to a total of <code>maxsize</code> megabytes, dropping the least used chunks when <code>maxsize</code> is exceeded.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/cached.jl#L6-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.ChunkIndex" href="#DiskArrays.ChunkIndex"><code>DiskArrays.ChunkIndex</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ChunkIndex{N}</code></pre><p>This can be used in indexing operations when one wants to extract a full data chunk from a DiskArray. Useful for  iterating over chunks of data. d[ChunkIndex(1,1)] will extract the first chunk of a 2D-DiskArray</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/chunks.jl#L278-L283">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.ChunkIndices" href="#DiskArrays.ChunkIndices"><code>DiskArrays.ChunkIndices</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ChunkIndices{N}</code></pre><p>Represents an iterator </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/chunks.jl#L293-L297">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.ConcatDiskArray" href="#DiskArrays.ConcatDiskArray"><code>DiskArrays.ConcatDiskArray</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ConcatDiskArray &lt;: AbstractDiskArray</code></pre><p>Joins multiple AbstractArrays or AbstractDiskArrays in lazy concatination.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/cat.jl#L2-L6">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.IrregularChunks" href="#DiskArrays.IrregularChunks"><code>DiskArrays.IrregularChunks</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">IrregularChunks &lt;: ChunkType</code></pre><p>Defines chunks along a dimension where chunk sizes are not constant but arbitrary</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/chunks.jl#L78-L82">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.IrregularChunks-Tuple{}" href="#DiskArrays.IrregularChunks-Tuple{}"><code>DiskArrays.IrregularChunks</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">IrregularChunks(; chunksizes)</code></pre><p>Returns an IrregularChunks object for the given list of chunk sizes</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/chunks.jl#L92-L96">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.RegularChunks" href="#DiskArrays.RegularChunks"><code>DiskArrays.RegularChunks</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">RegularChunks &lt;: ChunkType</code></pre><p>Defines chunking along a dimension where the chunks have constant size and a potential offset for the first chunk. The last chunk is truncated to fit the array size. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/chunks.jl#L15-L20">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.allow_scalar-Tuple{Bool}" href="#DiskArrays.allow_scalar-Tuple{Bool}"><code>DiskArrays.allow_scalar</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">allow_scalar(x::Bool)</code></pre><p>Specify if a disk array can do scalar indexing, (with all <code>Int</code> arguments).</p><p>Setting <code>allow_scalar(false)</code> can help identify the cause of poor performance.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/scalar.jl#L4-L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.approx_chunksize-Tuple{DiskArrays.GridChunks}" href="#DiskArrays.approx_chunksize-Tuple{DiskArrays.GridChunks}"><code>DiskArrays.approx_chunksize</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">approx_chunksize(g::GridChunks)</code></pre><p>Returns the aproximate chunk size of the grid. For the dimension with regular chunks, this will be the exact chunk size while for dimensions with irregular chunks this is the average chunks size. Useful for downstream applications that want to distribute computations and want to know about chunk sizes. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/chunks.jl#L215-L221">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.arraysize_from_chunksize-Tuple{DiskArrays.RegularChunks}" href="#DiskArrays.arraysize_from_chunksize-Tuple{DiskArrays.RegularChunks}"><code>DiskArrays.arraysize_from_chunksize</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">arraysize_from_chunksize(g::ChunkType)</code></pre><p>Returns the size of the dimension represented by a chunk object. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/chunks.jl#L205-L209">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.cache-Tuple{AbstractArray}" href="#DiskArrays.cache-Tuple{AbstractArray}"><code>DiskArrays.cache</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">cache(A::AbstractArray; maxsize=1000)</code></pre><p>Wrap internal disk arrays with <code>CacheDiskArray</code>.</p><p>This function is intended to be extended by package that want to re-wrap the disk array afterwards, such as YAXArrays.jl or Rasters.jl.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/cached.jl#L59-L66">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.can_scalar-Tuple{}" href="#DiskArrays.can_scalar-Tuple{}"><code>DiskArrays.can_scalar</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">can_scalar()</code></pre><p>Check if DiskArrays is set to allow scalar indexing, with <a href="#DiskArrays.allow_scalar-Tuple{Bool}"><code>allow_scalar</code></a>.</p><p>Returns a <code>Bool</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/scalar.jl#L13-L19">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.chunktype_from_chunksizes-Tuple{Any}" href="#DiskArrays.chunktype_from_chunksizes-Tuple{Any}"><code>DiskArrays.chunktype_from_chunksizes</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">chunktype_from_chunksizes(chunks)</code></pre><p>Utility function that constructs either a <code>RegularChunks</code> or an <code>IrregularChunks</code> object based on a vector of chunk sizes given as worted Integers. Wherever possible it will try to create a regular chunks object.  </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/chunks.jl#L178-L184">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.eachchunk" href="#DiskArrays.eachchunk"><code>DiskArrays.eachchunk</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">eachchunk(a)</code></pre><p>Returns an iterator with <code>CartesianIndices</code> elements that mark the index range of each chunk within an array.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/chunks.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.element_size-Tuple{AbstractArray}" href="#DiskArrays.element_size-Tuple{AbstractArray}"><code>DiskArrays.element_size</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">element_size(a::AbstractArray)</code></pre><p>Returns the approximate size of an element of a in bytes. This falls back to calling <code>sizeof</code> on  the element type or to the value stored in <code>DiskArrays.fallback_element_size</code>. Methods can be added for  custom containers. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/chunks.jl#L308-L314">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.findints-Tuple{Any}" href="#DiskArrays.findints-Tuple{Any}"><code>DiskArrays.findints</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Find the indices of elements containing integers in a Tuple</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/diskarray.jl#L273">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.grid_offset-Tuple{DiskArrays.GridChunks}" href="#DiskArrays.grid_offset-Tuple{DiskArrays.GridChunks}"><code>DiskArrays.grid_offset</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">grid_offset(g::GridChunks)</code></pre><p>Returns the offset of the grid for the first chunks. Expect this value to be non-zero for views into regular-gridded arrays. Useful for downstream applications that want to distribute computations and want to know about chunk sizes. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/chunks.jl#L224-L229">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.max_chunksize-Tuple{DiskArrays.GridChunks}" href="#DiskArrays.max_chunksize-Tuple{DiskArrays.GridChunks}"><code>DiskArrays.max_chunksize</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">max_chunksize(g::GridChunks)</code></pre><p>Returns the maximum chunk size of an array for each dimension. Useful for pre-allocating arrays to make sure they can hold a chunk of data. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/chunks.jl#L232-L237">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.readblock!" href="#DiskArrays.readblock!"><code>DiskArrays.readblock!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">readblock!(A::AbstractDiskArray, A_ret, r::AbstractUnitRange...)</code></pre><p>The only function that should be implemented by a <code>AbstractDiskArray</code>. This function</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/diskarray.jl#L10-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.resolve_indices-Tuple{Any, Any}" href="#DiskArrays.resolve_indices-Tuple{Any, Any}"><code>DiskArrays.resolve_indices</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">resolve_indices(a, i)</code></pre><p>Determines a list of tuples used to perform the read or write operations. The returned values are:</p><ul><li><code>outsize</code> size of the output array</li><li><code>temp_size</code> size of the temp array passed to <code>readblock</code></li><li><code>output_indices</code> indices for copying into the output array</li><li><code>temp_indices</code> indices for reading from temp array</li><li><code>data_indices</code> indices for reading from data array</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/diskarray.jl#L32-L42">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.writeblock!" href="#DiskArrays.writeblock!"><code>DiskArrays.writeblock!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">writeblock!(A::AbstractDiskArray, A_in, r::AbstractUnitRange...)</code></pre><p>Function that should be implemented by a <code>AbstractDiskArray</code> if write operations should be supported as well.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/diskarray.jl#L17-L22">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.TestTypes.AccessCountDiskArray" href="#DiskArrays.TestTypes.AccessCountDiskArray"><code>DiskArrays.TestTypes.AccessCountDiskArray</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AccessCountDiskArray(A; chunksize)</code></pre><p>An array that counts <code>getindex</code> and <code>setindex</code> calls, to debug and optimise chunk access.</p><p><code>getindex_count(A)</code> and <code>setindex_count(A)</code> can be used to check the the counters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/util/testtypes.jl#L8-L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.TestTypes.ChunkedDiskArray" href="#DiskArrays.TestTypes.ChunkedDiskArray"><code>DiskArrays.TestTypes.ChunkedDiskArray</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ChunkedDiskArray(A; chunksize)</code></pre><p>A generic <code>AbstractDiskArray</code> that can wrap any other <code>AbstractArray</code>, with custom <code>chunksize</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/util/testtypes.jl#L76-L80">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="DiskArrays.TestTypes.UnchunkedDiskArray" href="#DiskArrays.TestTypes.UnchunkedDiskArray"><code>DiskArrays.TestTypes.UnchunkedDiskArray</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">UnchunkedDiskArray(A)</code></pre><p>A disk array without chunking, that can wrap any other <code>AbstractArray</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/meggart/DiskArrays.jl/blob/b49e9c86d05ade0bf897ed1b08f5a29747b9d299/src/util/testtypes.jl#L94-L98">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Monday 4 March 2024 10:09">Monday 4 March 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
